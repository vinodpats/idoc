sap.ui.define([
	"sap/ui/core/mvc/Controller",
	"sap/ui/model/Filter",
	"sap/ui/model/FilterOperator"
], function(Controller, Filter, FilterOperator) {
	"use strict";
	return Controller.extend("com.ibmidocdashboard.controller.View1", {
		onInit: function() {
			var aFilter = [];
			aFilter.push(new Filter("status", FilterOperator.EQ, "68")); // filter binding
			// var oList = this.getView().byId("idocList");
			// var oBinding = oList.getBinding("items");
			// oBinding.filter(aFilter);
		},
		/**
		 *@memberOf com.ibmidocdashboard.controller.View1
		 */
		onFilter: function() {
			//This code was generated by the layout editor.
			var oTable = this.getView().byId("idocList");
			var oBindingItems = oTable.getBinding("items");

			//filter
			var oFilters = [];
			if(this.byId("__input0").getValue() !== ""){
				var oFilter = new sap.ui.model.Filter("status", sap.ui.model.FilterOperator.EQ, this.byId("__input0").getValue()); 
				oFilters.push(oFilter);
			}
			
			oBindingItems.filter(oFilters);

			//sort
			// var oSorter= new sap.ui.model.Sorter("status", false, true);  //property, descending, grouping
			// oBindingItems.sort(oSorter);

		},

		handlePopoverPress: function(oEvent) {
			// create popover
			if (!this._oPopover) {
				this._oPopover = sap.ui.xmlfragment("com.ibmidocdashboard.view.fragments.complex", this);
				this.getView().addDependent(this._oPopover);
				}
				// delay because addDependent will do a async rerendering and the actionSheet will immediately close without it.
				var oButton = oEvent.getSource();
				jQuery.sap.delayedCall(0, this, function() {
					this._oPopover.openBy(oButton);
				});

			
		},
		handleClosePress: function(oEvent) {
			
				this._oPopover.close();
		// sap.ui.core.Fragment.byId("com.ibmidocdashboard.view.fragments.complex", "__popover0").destroy();

		},
		onExit: function() {
			if (this._oPopover) {
				this._oPopover.destroy();
			}
		}

	});
});